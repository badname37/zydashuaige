<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2026å†¬ä»¤è¥ Â· æ•¢äºä¸ä¼—ä¸åŒ</title>
<style>
body { font-family:"Microsoft Yahei",sans-serif; background:#0b1736; color:#fff; margin:0; padding:0; }
header { text-align:center; padding:30px 10px; background:#142857; }
header h1 { margin:0; font-size:2em; }
header p { margin:5px 0; color:#a9c4ff; }
.container { max-width:900px; margin:0 auto; padding:20px; }
section { background-color:#1b2c52; border-radius:12px; padding:20px; margin-bottom:25px; box-shadow:0 0 10px rgba(255,255,255,0.05); }
h2 { border-bottom:2px solid #3f64b5; padding-bottom:5px; margin-bottom:15px; }
table { border-collapse:collapse; width:100%; }
th, td { border:1px solid #324a7a; padding:8px; text-align:center; min-width:80px; }
th { background-color:#223a70; cursor:pointer; }
input[type=number], input[type=text] { width:100%; text-align:center; border-radius:5px; border:none; padding:4px; background:#1b2c52; color:#fff; }
.button { background-color:#3f64b5; color:white; padding:8px 15px; border:none; border-radius:8px; cursor:pointer; margin-top:10px; }
.button:hover { background-color:#5c81e0; }
.admin-panel { text-align:right; margin-bottom:10px; }
#passwordInput, #announcementInput { padding:5px; border-radius:6px; border:none; margin-right:5px; }
.nav-buttons { margin-bottom:20px; text-align:center; }
.nav-buttons .button { margin:0 5px; }
.hidden { display:none; }
#announcementBox { background:#3f64b5; padding:10px; border-radius:6px; word-break: break-word; }
#detailsSection { overflow-x:auto; }
#detailsTable { min-width:800px; table-layout:auto; border-collapse: collapse; }
#detailsTable th:first-child,#detailsTable td:first-child{
  position: sticky;
  left:0;
  background:#223a70;
  z-index:2;
}
#detailsTable th:last-child,#detailsTable td:last-child{
  position: sticky;
  right:0;
  background:#223a70;
  z-index:1;
}
</style>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
</head>
<body>

<header>
<h1>2026å†¬ä»¤è¥ Â· æ•¢äºä¸ä¼—ä¸åŒ</h1>
<p>Winter Camp 2026 â€” Dare to be Different</p>
</header>

<div class="container">
<div class="admin-panel">
<span id="statusText">ğŸ”’ å½“å‰ä¸ºæŸ¥çœ‹æ¨¡å¼</span>
<input type="password" id="passwordInput" placeholder="è¾“å…¥ç®¡ç†å‘˜å¯†ç ">
<button class="button" onclick="login()">ç™»å½•</button>
<button class="button" onclick="logout()">é€€å‡º</button>
<button class="button" onclick="downloadJSON()">ğŸ“¥ ä¸‹è½½ data.json</button>
</div>

<div class="nav-buttons">
<button class="button" onclick="showSection('home')">ğŸ  é¦–é¡µ</button>
<button class="button" onclick="showSection('details')">ğŸ“‹ ç§¯åˆ†è¯¦ç»†è®°å½•</button>
</div>

<section id="homeSection">
  <h2>ğŸ“£ å…¬å‘Šæ </h2>
  <div id="announcementBox"></div>
  <div id="announcementEditor" style="margin-top:10px; display:none;">
    <input id="announcementInput" type="text" placeholder="ç¼–è¾‘å…¬å‘Šå†…å®¹">
    <button class="button" onclick="saveAnnouncement()">ğŸ’¾ ä¿å­˜å…¬å‘Š</button>
  </div>

  <h2>ğŸ“… æ—¶é—´è¡¨</h2>
  <table>
    <tr><th>æ—¥æœŸ</th><th>æ—¶é—´</th><th>æ´»åŠ¨å†…å®¹</th></tr>
    <tr><td>Day 1</td><td>09:00 - 12:00</td><td>ç ´å†°æ¸¸æˆ & å°ç»„ä»‹ç»</td></tr>
    <tr><td>Day 1</td><td>14:00 - 17:00</td><td>å›¢é˜ŸæŒ‘æˆ˜èµ›</td></tr>
    <tr><td>Day 2</td><td>09:30 - 11:30</td><td>ä¸»é¢˜å·¥ä½œåŠ</td></tr>
    <tr><td>Day 2</td><td>15:00 - 17:00</td><td>åˆ›é€ åŠ›ç«èµ›</td></tr>
    <tr><td>Day 3</td><td>09:00 - 11:00</td><td>åœ£ç»å¯†å®¤é€ƒè„±</td></tr>
    <tr><td>Day 3</td><td>14:00 - 16:30</td><td>æ€»ç»“ & åˆ†äº«ä¼š</td></tr>
  </table>

  <h2>âš ï¸ æ³¨æ„äº‹é¡¹</h2>
  <ul>
    <li>è¯·éµå®ˆè¥ä¼šæ—¶é—´ä¸è§„åˆ™ï¼Œå‡†æ—¶å‚åŠ æ´»åŠ¨ã€‚</li>
    <li>ä¿æŒæ•´æ´ï¼Œä¸ä¹±æ‰”åƒåœ¾ã€‚</li>
    <li>å½¼æ­¤å°Šé‡ã€äº’ç›¸å…³å¿ƒï¼Œå…±åŒè¥é€ æ¸©æš–æ°›å›´ã€‚</li>
  </ul>

  <h2>ğŸ† ç§¯åˆ†æ¦œ</h2>
  <table id="scoreTable">
    <tr><th>ç»„åˆ«</th><th>ç§¯åˆ†</th></tr>
  </table>
  <button class="button" id="saveScoreBtn" onclick="saveScores()" style="display:none;">ğŸ’¾ ä¿å­˜ç§¯åˆ†</button>
</section>

<section id="detailsSection" class="hidden">
  <table id="detailsTable"></table>
  <div style="margin-top:10px;" id="detailsAdminBtns" class="hidden">
    <button class="button" onclick="addRow()">â• æ·»åŠ è¡Œ</button>
    <button class="button" onclick="addColumn()">â• æ·»åŠ åˆ—</button>
  </div>
  <button class="button" id="saveDetailsBtn" onclick="saveDetails()" style="display:none;">ğŸ’¾ ä¿å­˜è¯¦ç»†è®°å½•</button>
</section>

<script>
const PASSWORD = "2026";
let isAdmin = false;
const groups = ["ç¬¬ä¸€ç»„","ç¬¬äºŒç»„","ç¬¬ä¸‰ç»„","ç¬¬å››ç»„","ç¬¬äº”ç»„","ç¬¬å…­ç»„","ç¬¬ä¸ƒç»„","ç¬¬å…«ç»„","ç¬¬ä¹ç»„"];
let data = { announcement:"", scores:{}, details:[] };

// æ˜¾ç¤º/éšè—
function showSection(section){
  document.getElementById('homeSection').classList.add('hidden');
  document.getElementById('detailsSection').classList.add('hidden');
  document.getElementById(section+'Section').classList.remove('hidden');
}

// åŠ è½½é»˜è®¤æ•°æ®
function loadDefaultData(){
  groups.forEach(g=>{
    if(!(g in data.scores)) data.scores[g]=0;
  });
  if(data.details.length===0){
    data.details = groups.map(g=>({å°ç»„:g}));
  }
}

// å…¬å‘Š
function loadAnnouncement(){
  document.getElementById("announcementBox").innerText = data.announcement || "æš‚æ— å…¬å‘Š";
  if(isAdmin) document.getElementById("announcementInput").value = data.announcement || "";
}
function saveAnnouncement(){
  if(!isAdmin) return alert("ç®¡ç†å‘˜æ¨¡å¼ä¸‹æ‰å¯ä¿®æ”¹");
  data.announcement = document.getElementById("announcementInput").value;
  alert("âœ… å…¬å‘Šå·²ä¿å­˜ï¼Œå¯ç‚¹å‡»ä¸‹è½½ data.json ä¸Šä¼  GitHub æ›´æ–°");
  loadAnnouncement();
}

// ç§¯åˆ†æ¦œ
function loadScores(){
  const table=document.getElementById("scoreTable");
  table.innerHTML="<tr><th>ç»„åˆ«</th><th>ç§¯åˆ†</th></tr>";
  groups.forEach(g=>{
    const val = data.scores[g] || 0;
    const row = document.createElement("tr");
    if(isAdmin) row.innerHTML=`<td>${g}</td><td><input id="${g}" type="number" value="${val}"></td>`;
    else row.innerHTML=`<td>${g}</td><td>${val}</td>`;
    table.appendChild(row);
  });
}
function saveScores(){
  if(!isAdmin) return;
  groups.forEach(g=>{
    const inputEl=document.getElementById(g);
    if(inputEl) data.scores[g]=parseInt(inputEl.value)||0;
  });
  alert("âœ… ç§¯åˆ†å·²ä¿å­˜ï¼Œå¯ç‚¹å‡»ä¸‹è½½ data.json ä¸Šä¼  GitHub æ›´æ–°");
  loadScores();
}

// è¯¦ç»†è®°å½•
function loadDetails(){
  const table=document.getElementById("detailsTable");
  table.innerHTML="";
  const stored = data.details;

  const header=table.insertRow();
  const allKeys = Object.keys(stored[0] || {å°ç»„:""});
  const cols = ["å°ç»„"];
  allKeys.forEach(k=>{ if(k!=="å°ç»„") cols.push(k); });
  cols.push("æ€»åˆ†");
  cols.forEach(c=>{
    const th=document.createElement("th");
    th.innerText=c;
    if(isAdmin && c!=="å°ç»„" && c!=="æ€»åˆ†") th.contentEditable = true;
    header.appendChild(th);
  });

  stored.forEach(r=>{
    const row=table.insertRow();
    cols.forEach(c=>{
      const cell=row.insertCell();
      if(c==="æ€»åˆ†") cell.innerText=0;
      else cell.innerText = r[c]||"";
      if(isAdmin && c!=="å°ç»„" && c!=="æ€»åˆ†") cell.contentEditable = true;
    });
  });
  updateTotalScores();
}

function updateTotalScores(){
  const table=document.getElementById("detailsTable");
  const rows=table.rows;
  const totalCol=rows[0].cells.length-1;
  const newDetails = [];

  for(let i=1;i<rows.length;i++){
    let sum=0;
    for(let j=1;j<totalCol;j++){
      const val=parseInt(rows[i].cells[j].innerText)||0;
      sum+=val;
    }
    rows[i].cells[totalCol].innerText=sum;

    const groupName = rows[i].cells[0].innerText;
    const scoreRow = document.querySelectorAll("#scoreTable tr");
    scoreRow.forEach(r=>{
      if(r.cells[0] && r.cells[0].innerText === groupName){
        if(r.cells[1]){
          if(!isAdmin) r.cells[1].innerText = sum;
          else {
            const inputEl = r.cells[1].querySelector("input");
            if(inputEl) inputEl.value = sum;
            else r.cells[1].innerText = sum;
          }
        }
      }
    });

    // æ„å»º data.details
    const rowData = {};
    for(let j=0;j<totalCol;j++){
      rowData[rows[0].cells[j].innerText] = rows[i].cells[j].innerText;
    }
    newDetails.push(rowData);

    // åŒæ­¥ data.scores
    data.scores[groupName] = sum;
  }
  data.details = newDetails; // æ›´æ–° data.details
}

function addRow(){
  if(!isAdmin) return;
  const table=document.getElementById("detailsTable");
  const header=table.rows[0];
  const row=table.insertRow();
  for(let i=0;i<header.cells.length;i++){
    const cell=row.insertCell();
    if(i===0) cell.innerText="æ–°å°ç»„";
    else if(i===header.cells.length-1) cell.innerText=0;
    else cell.innerText="";
    if(isAdmin && i!==0 && i!==header.cells.length-1) cell.contentEditable = true;
  }
  updateTotalScores();
}
function addColumn(){
  if(!isAdmin) return;
  const table=document.getElementById("detailsTable");
  const name=prompt("è¯·è¾“å…¥åˆ—æ ‡é¢˜");
  if(!name) return;
  const header=table.rows[0];
  const insertIndex = header.cells.length-1; // æ’å…¥åˆ°æ€»åˆ†å‰
  const newTh = header.insertCell(insertIndex);
  newTh.innerText=name;
  if(isAdmin) newTh.contentEditable=true;
  for(let i=1;i<table.rows.length;i++){
    const c=table.rows[i].insertCell(insertIndex);
    c.innerText="";
    if(isAdmin) c.contentEditable = true;
  }
  updateTotalScores();
}
function saveDetails(){
  if(!isAdmin) return;
  updateTotalScores();
  alert("âœ… è¯¦ç»†è®°å½•å·²ä¿å­˜ï¼Œå¯ç‚¹å‡»ä¸‹è½½ data.json ä¸Šä¼  GitHub æ›´æ–°");
  loadDetails();
}

// ç®¡ç†å‘˜
function login(){
  const input=document.getElementById("passwordInput").value;
  if(input===PASSWORD){
    isAdmin=true;
    document.getElementById("statusText").innerText="ğŸŸ¢ ç®¡ç†å‘˜æ¨¡å¼";
    document.getElementById("saveScoreBtn").style.display="inline-block";
    document.getElementById("saveDetailsBtn").style.display="inline-block";
    document.getElementById("announcementEditor").style.display="block";
    document.getElementById("detailsAdminBtns").classList.remove("hidden");
    loadAnnouncement(); loadScores(); loadDetails();
  } else alert("âŒ å¯†ç é”™è¯¯ï¼");
}
function logout(){
  isAdmin=false;
  document.getElementById("statusText").innerText="ğŸ”’ å½“å‰ä¸ºæŸ¥çœ‹æ¨¡å¼";
  document.getElementById("saveScoreBtn").style.display="none";
  document.getElementById("saveDetailsBtn").style.display="none";
  document.getElementById("announcementEditor").style.display="none";
  document.getElementById("detailsAdminBtns").classList.add("hidden");
  loadAnnouncement(); loadScores(); loadDetails();
}

// ä¸‹è½½ data.json
function downloadJSON(){
  if(!isAdmin) return alert("ç®¡ç†å‘˜æ¨¡å¼ä¸‹æ‰å¯æ“ä½œ");
  const blob = new Blob([JSON.stringify(data,null,2)], {type:"application/json"});
  const url = URL.createObjectURL(blob);
  const a=document.createElement("a");
  a.href=url;
  a.download="data.json";
  a.click();
  URL.revokeObjectURL(url);
  alert("âœ… data.json å·²ç”Ÿæˆï¼Œå¯ä¸Šä¼ åˆ° GitHub åŒæ­¥æ›´æ–°");
}

// åˆå§‹åŒ–
loadDefaultData();
loadAnnouncement();
loadScores();
loadDetails();
</script>
</body>
</html>
